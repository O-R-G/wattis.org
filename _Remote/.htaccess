Options +Indexes
RewriteEngine On
RewriteBase  /

# internal -- url remains, request remapped on server 
# external -- url changes, server remaps incoming request [R]

# 0. if full url != marker 
# 1. rewrite full url  --> clean url
# 2. rewrite clean url --> full url & marker

# note: RewriteCond only applies to RewriteRule that immediately follows
# note: [OR] works as or, and [S=1] skips next 1 ReWriteRule
# [L] flag -- last rule, stop processing
# http://httpd.apache.org/docs/current/rewrite/flags.html
# http://httpd.apache.org/docs/current/rewrite/remapping.html

# $1 ... regex back ref same line
# %1 ... regex back ref previous line
 
# main

RewriteRule ^main$ main.php? [L]

# about

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} id=22
RewriteRule ^detail\.php$ about? [R,L]
RewriteRule ^about$ detail.php?marker&id=22 [L]

# visit

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} id=23
RewriteRule ^detail\.php$ visit? [R,L]
RewriteRule ^visit$ detail.php?marker&id=23 [L]

# contact

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} id=24
RewriteRule ^detail\.php$ contact? [R,L]
RewriteRule ^contact$ detail.php?marker&id=24 [L]

# follow

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} id=28
RewriteRule ^detail\.php$ follow? [R,L]
RewriteRule ^follow$ detail.php?marker&id=28 [L]

# support

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} id=25
RewriteRule ^detail\.php$ support? [R,L]
RewriteRule ^support$ detail.php?marker&id=25 [L]

# editions

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} id=26
RewriteRule ^grid\.php$ editions? [R,L]
RewriteRule ^editions$ grid.php?marker&id=26 [L]

# catalogs

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} id=27
RewriteRule ^grid\.php$ catalogs? [R,L]
RewriteRule ^catalogs$ grid.php?marker&id=27 [L]

# archive

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} id=30
RewriteRule ^detail\.php$ archive? [R,L]
RewriteRule ^archive$ detail.php?marker&id=30 [L]

# capp

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} id=31
RewriteRule ^detail\.php$ capp? [R,L]
RewriteRule ^capp$ detail.php?marker&id=31 [L]

# intern

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} id=29
RewriteRule ^detail\.php$ intern? [R,L]
RewriteRule ^intern$ detail.php?marker&id=29 [L]

# calendar

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} id=7
RewriteRule ^list\.php$ intern? [R,L]
RewriteRule ^calendar$ list.php?marker&id=7 [L]

# exhibitions

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} id=93
RewriteRule ^detail\.php$ exhibitions? [R,L]
RewriteRule ^exhibitions$ detail.php?marker&id=93 [L]



### generics ### 

# view

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} ^(.*)
RewriteRule ^detail\.php$ view?%1 [R,L]
RewriteRule ^view$ detail.php?marker [QSA,L]

# more

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} ^(.*)
RewriteRule ^artist\.php$ more?%1 [R,L]
RewriteRule ^more$ artist.php?marker [QSA,L]

# buy

RewriteCond %{QUERY_STRING} !marker
RewriteCond %{QUERY_STRING} ^(.*)
RewriteRule ^griddetail\.php$ buy?%1 [R,L]
RewriteRule ^buy$ griddetail.php?marker [QSA,L]
